<!doctype html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Newport Beach / Costa Mesa</title>
    <style>

        html, body {
          margin: 0;
          padding: 0;
          width: 100%;
          height: 100%;
          font-family: "Oswald", Helvetica, Arial, sans-serif;
          color: white;
          background-color: #2c3d67;
          font-weight: 300;
          font-size: 2.2vh;
        }

        ul, li, h1, p, a {
          margin: 0; padding: 0;
        }

        a {
          color: white;
          text-decoration: none;
        }

        h1 {
          font-size: 3vh;
        }

        a h1 {
          display: inline;
          border-bottom: .125em solid white;
        }

        h4 + p {
          padding-bottom: 1em;
        }

        header {
          display: flex;
          justify-content: space-between;
          /*margin: 2vh 0 0 2vh;*/
        }

        header h1 {
          font-size: 4vh;
          font-family: "industry-inc-stencil";
          width: 70vw;
          padding-left: 3vh;
        }

        header #buttonFilters {
          width: 30vw;
          text-align: right;
          padding-right: 2vw;
        }

        #NewportMesaSearchPanel {
          width: 100%;
        }

        #NewportMesaDisplayPanel {
          display: flex;
          overflow: hidden;
          /*height: 95vh;*/
        }

        #list {
          width: 25vw;
          overflow: hidden;
        }

        .list-items {
          height: 100%;
          width: 100%;
          overflow: auto;
          padding-left: 3vh;
        }

        #mapContainer {
          width: 75vw;
        }

        #map {
          margin: 0 0 2vh 2vh;
          height: 90vh;
        }

        ul, li {
          list-style-type: none;
          cursor: pointer;
        }

        li:hover {
          color: #20c5f9;
        }

        .infoWrapper {
          margin: 0 2vh;
        }

        .infoQuote {
          background-color: white;
          color: #32325d;
          padding: .5em;
          border-top-left-radius: 1em;
          border-top-right-radius: 1em;
          border-bottom-right-radius: 1em;
          border-bottom-left-radius: 1em;
        }

        .currentItem {
          font-weight: 400;
          color: #20c5f9;
        }

        .snippet::before {
          content: '"';
        }

        .snippet::after {
          content: '"';
        }

        .snippet {
          font-style: italic;
        }

        .infoWindow {
          font-family: "Oswald";
          color: #32325d;
          font-weight: 300;
        }

        .chart {
          padding-top: 3vh;
        }

        .axis line, .axis path {
          fill: none;
          stroke: #fff;
          stroke-width: 0;
          shape-rendering: crispEdges;
        }

        .windChart {
          display: flex;
          justify-content: space-between;
        }
        @media (orientation: landscape) {
          header {
            height: 5vh;
          }
          #NewportMesaDisplayPanel {
            height: 95vh;
          }
          #info {
            width: 30vw;
          }
        }

        @media (orientation: portrait){

          #NewportMesaDisplayPanel {
            flex-wrap: wrap;
          }

          #list, #map {
            height: calc(75vh * .95);
          }
          #list {
            height: calc(60vh * .95);
          }
          #mapContainer, #map {
            height: calc(60vh * .95);
          }

          #mapContainer {
            width: 52vw;
            margin-right: 2vh;
          }

          #list {
            width: 40vw;
          }

          #info {
            width: 100vw;
            /*min-height: calc(50vh * .95);*/
          }

          .infoWrapper {
            display: flex;
            justify-content: space-between;
            padding: 1em;
            margin-top: 2vh;
            border-top: solid white .25em;
          }

          .intro {
            flex-wrap: wrap;
            padding-right: 3vh;
          }

          .intro p {
            width: 100%;

          }

          .infoContact, .infoQuote{
            width: 50%;
          }

          .forecast>div {
            width: 50%;
          }
        }

    </style>
  </head>
  <body>
    <div id="NewportMesaApp">
      <header>
        <h1>Newport/Mesa Surf</h1>
        <div id="buttonFilters">
          <!-- TODO: Remove or keep filtering
          <button data-bind="click: showSurfSpots">Surf Spots</button>
          <button data-bind="click: showRestaurants">Restaurants</button>
          -->
        </div>
      </header>
      <div id="NewportMesaDisplayPanel">
        <div id="list">
          <div class="list-items">
            <div id="NewportMesaSearchPanel">
              <input data-bind="textInput: searchTerm" type="text" name="mapFilter" placeholder="Filter Results">
            </div>
            <ul data-bind="foreach: locations" id="location-list">
              <li data-bind="text: $data.locName, click: $parent.showLocation, css: { currentItem : $data.isActive() > 0 }"></li>
            </ul>
          </div>
        </div>
        <div id="mapContainer">
          <div id="map">
          </div>
        </div>
        <div data-bind="with: currentItemDisplay" id="info">
          <div id="info-data">
            <!-- ko if: locType === 'default' -->
            <div class="infoWrapper intro">
              <h1>About Newport/Mesa</h1>
              <p>Newport Beach and Costa Mesa are neighboring cities in Orange County, CA. Newport Beach contains
              several excellent surf breaks. Starting at West Newport, where the Santa Ana river meets the Pacific Ocean,
              there is a break referred to as "River Jetties." Farther South-East are the Newport Jetties, a series of
              beach breaks separated by rock jetties. Just North of the Newport Pier is Blackies, a popular break named
              after a nearby bar. At the end of the Balboa Peninsula is the Wedge, an infamous big-wave spot popular with
              bodysurfers, bodyboarders and surfers alike. On the other side of the harbor is Corona Del Mar, a scenic
              beach visited by all ages.</p>
            </div>
            <!-- /ko -->
            <!-- if data bind to check to see if this is a surf or business loc -->
            <!-- ko if: locType === 'surf' -->
            <div class="infoWrapper forecast">
              <div>
                <h1 data-bind="text: locName"></h1>
                <p data-bind="text: locDescription"></p>
              </div>
              <div class="chart">
                <div data-bind="with: forecast()[0]">
                  <p data-bind="text: moment(timestamp*1000).format('dddd, MMMM Do YYYY')"></p>
                </div>
                <div data-bind="with: forecast">
                  <div data-bind="MSWswellChart: $data"></div>
                  <!-- <div data-bind="windChart: $data"></div> -->
                </div>
                <button data-bind="click: $data.loadPrevForecast" name="prev">Previous day</button>
                <button data-bind="click: $data.loadNextForecast" name="next">Next day</button>
              </div>
            </div>
            <!-- /ko -->
            <!-- ko if: locType === 'biz' -->
            <div class="infoWrapper">
              <div class="infoContact">
                <a data-bind="attr: { href: url }">
                  <h1 data-bind="text: locName"></h1>
                </a>
                <h4 data-bind="text: display_phone"></h4>
                <p data-bind="text: categories"></p>
              </div>
              <div class="infoQuote">
                <p data-bind="text: snippet_text" class="snippet"></p>
                <img data-bind="attr: { src: rating_img_url }"/>
              </div>
            </div>
            <!-- /ko -->
          </div>
        </div>
      </div>

    </div>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> -->
    <script>
      WebFontConfig = {
        google: {
          families: ['Oswald:300,400']
        },
        typekit: {
          id: 'cgy0ivd'
        }
      };
      (function(d) {
        var wf = d.createElement('script'), s = d.scripts[0];
        wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js';
        s.parentNode.insertBefore(wf, s);
       })(document);
    </script>
    <script src="js/libs/jquery.min.js"></script>
    <script src="js/libs/knockout-3.2.0.js"></script>
    <script src="js/libs/underscore.js"></script>
    <script src="js/libs/oauth-signature.min.js"></script>
    <script src="js/libs/moment.min.js"></script>
    <script src="js/libs/d3.min.js"></script>
    <script src= "js/newp_app.js"></script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAtqzH53xQyC04PbQFV4brTqidjBzhr_dI&callback=initMap">
    </script>
  </body>
</html>
